## å˜é‡å£°æ˜
Rust ä¸­ä½¿ç”¨ `let` æ¥å£°æ˜å˜é‡ï¼ˆ~~è¿™ä¸æ˜¯ JS å—ï¼ŸğŸ¤£~~ï¼‰ï¼Œé»˜è®¤å˜é‡æ˜¯ä¸å¯ä¿®æ”¹çš„ï¼Œå¦‚æœè¦å£°æ˜å¯å˜åŒ–çš„å˜é‡å¯åŠ  `mut` å‚æ•°ã€‚
```rust
let word = "hello";
word = "Hello"; // cannot mutate immutable variable `word`

let mut word2 = "world";
word2 = "world!"; // ä¿®æ”¹å˜é‡word2
```
å£°æ˜å˜é‡æ—¶å¯ä»¥å£°æ˜å˜é‡ç±»å‹ï¼Œä¸æŒ‡å®šå˜é‡ç±»å‹çš„è¯ Rust ä¼šè‡ªåŠ¨æ¨å¯¼å…¶ç±»å‹æˆ–è€…ä½¿ç”¨é»˜è®¤ç±»å‹ã€‚æ•´å‹é»˜è®¤ä¸ºÂ `i32`Â ç±»å‹ï¼Œæµ®ç‚¹å‹é»˜è®¤ä¸ºÂ `f64`ç±»å‹ã€‚  
**æ³¨æ„**ï¼Œä½¿ç”¨ `mut` æŒ‡å®šå˜é‡å¯ä»¥å˜åŒ–æ—¶ï¼ŒæŒ‡çš„æ˜¯åœ¨è¯¥å˜é‡èŒƒå›´å†…å˜åŒ–ï¼Œå¹¶ä¸å…è®¸æ”¹å˜å…¶ç±»å‹ï¼


## æ³¨é‡Š
ç±»ä¼¼äº jsï¼Œ Rustçš„æ³¨é‡Šæœ‰å•è¡Œæ³¨é‡Šå’Œå—æ³¨é‡Šã€‚

```rs
// å•è¡Œæ³¨é‡Š
fn main() {
    /* å—æ³¨é‡Š */
}
```

é™¤æ­¤ä¹‹å¤–ï¼ŒRustè¿˜æ”¯æŒç‰¹æ®Šçš„æ³¨é‡Šï¼š**æ–‡æ¡£æ³¨é‡Š**ï¼Œå…¶å†…å®¹å°†è¢«è§£ææˆ HTML å¸®åŠ©æ–‡æ¡£ã€‚
```rust
/// ä¸ºæ¥ä¸‹æ¥çš„é¡¹ç”Ÿæˆå¸®åŠ©æ–‡æ¡£
//! ä¸ºæ³¨é‡Šæ‰€å±äºçš„é¡¹ï¼ˆcrateã€æ¨¡å—æˆ–å‡½æ•°ç­‰ï¼‰ç”Ÿæˆå¸®åŠ©æ–‡æ¡£
```
æ–‡æ¡£æ³¨é‡Šå¯¹äºéœ€è¦æ–‡æ¡£çš„å¤§å‹é¡¹ç›®æ¥è¯´éå¸¸é‡è¦ã€‚å½“è¿è¡ŒÂ `rustdoc`ï¼Œæ–‡æ¡£æ³¨é‡Šå°±ä¼šç¼–è¯‘æˆæ–‡æ¡£ã€‚å®ƒä»¬ä½¿ç”¨Â `///`Â æ ‡è®°ï¼Œå¹¶æ”¯æŒÂ Markdownï¼


## è¾“å‡º
åœ¨ä¸Šä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬ç¬¬ä¸€ä¸ªRustç¨‹åºå°±æ˜¯è¾“å‡º hello worldï¼Œç°åœ¨æˆ‘ä»¬æ¥äº†è§£ä¸€äº›è¾“å‡ºç›¸å…³çš„çŸ¥è¯†ã€‚

æ‰“å°æ“ä½œç”±[`std::fmt`](https://rustwiki.org/zh-CN/std/fmt/)é‡Œé¢æ‰€å®šä¹‰çš„ä¸€ç³»åˆ—å®å¤„ç†ï¼ŒåŒ…æ‹¬ï¼š
-   `format!`ï¼šå°†æ ¼å¼åŒ–æ–‡æœ¬å†™åˆ°å­—ç¬¦ä¸²ã€‚
-   `print!`ï¼šä¸Â `format!`Â ç±»ä¼¼ï¼Œä½†å°†æ–‡æœ¬è¾“å‡ºåˆ°æ§åˆ¶å°ï¼ˆio::stdoutï¼‰ã€‚
-   `println!`: åœ¨`print!`è¾“å‡ºç»“æœä¸Šè¿½åŠ ä¸€ä¸ªæ¢è¡Œç¬¦ã€‚
-   `eprint!`ï¼šä¸Â `print!`Â ç±»ä¼¼ï¼Œä½†å°†æ–‡æœ¬è¾“å‡ºåˆ°æ ‡å‡†é”™è¯¯ï¼ˆio::stderrï¼‰ã€‚
-   `eprintln!`ï¼šåœ¨`eprint!`çš„åŸºç¡€ä¸Šè¿½åŠ ä¸€ä¸ªæ¢è¡Œç¬¦ã€‚

ä»¥ä¸Šå‡½æ•°ï¼ˆå‡†ç¡®æ¥è¯´æ˜¯[å®](https://rustwiki.org/zh-CN/rust-by-example/macros.html)ï¼Œå®å’Œå‡½æ•°çš„ç®€å•åŒºåˆ«å°±æ˜¯å®çš„åå­—éƒ½å¸¦`!`ï¼‰éƒ½ä»¥ç›¸åŒçš„æ–¹å¼æ ¼å¼åŒ–æ–‡æœ¬ï¼Œè€Œä¸”æ ¼å¼åŒ–çš„æ­£ç¡®æ€§ä¼šåœ¨ç¼–è¯‘æ—¶æ£€æŸ¥ï¼Œè€Œä¸æ˜¯è¿è¡Œæ—¶æŠ¥é”™ã€‚

è¿™é‡Œåˆ—å‡ºä¸€äº›å¸¸è§çš„æ ¼å¼åŒ–æ–‡æœ¬çš„ä½¿ç”¨æ–¹å¼ï¼š

1. æ­£å¸¸è¾“å‡º
```rust
println!("println")
```
2. æ’å…¥å˜é‡
ä½¿ç”¨`{}`æ¥å ä½ï¼Œ`{}`ä¼šè¢«ä»»æ„å˜é‡å†…å®¹æ‰€æ›¿æ¢ï¼Œå˜é‡å†…å®¹ä¼šè½¬åŒ–æˆå­—ç¬¦ä¸²ã€‚
```rust
let word = "hello";
println!("{}, world", word); // hello, world
```
ç”¨å˜é‡æ›¿æ¢å­—ç¬¦ä¸²å¯ä»¥ä½¿ç”¨ä½ç½®å‚æ•°ï¼ˆ*ä¸æŒ‡å®šçš„è¯ä¼šæŒ‰é¡ºåºæ¥ï¼Œä¸”æ•°é‡å¯¹åº”ä¸ä¸Šä¼šæŠ¥é”™*ï¼‰ã€‚
```rust
println!("{0}, this is {1}. {1}, this is {0}", "Alice", "Bob"); 
// Alice, this is Bob. Bob, this is Alice
```
é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥åœ¨å ä½ç¬¦å†…å‘½åå‚æ•°ï¼š
```rust
println!(
    "{who} {does} {what}",
    does = "are",
    who = "We",
    what = "frends!"
);
// We are frends!
```
3. å¯ä»¥ä½¿ç”¨ `:` æŒ‡å®šç‰¹æ®Šçš„æ ¼å¼ï¼Œæ¯”å¦‚æŒ‡å®šå˜é‡ä¸ºäºŒè¿›åˆ¶ï¼š
```rust
println!("{}ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºä¸º{0:b}", 2);
// 2ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºä¸º10
```
4. è¿˜å¯ä»¥æŒ‰æŒ‡å®šå®½åº¦æ¥å³å¯¹é½æ–‡æœ¬ï¼š
```rust
println!("{number:>width$}", number="right", width=10); // "     right"
```
æˆ–è€…è¿™æ ·å†™ï¼š
```rust
println!("{0:>1$}", "right", 10); // "     right"
```

è¿˜å¯ä»¥ä¸ºæ•°å­—è¡¥0ï¼š
```rust
println!("{number:>0width$}", number=1, width=9); // "000000001"
// or
println!("{0:>01$}", 1, 9); // "000000001"
```

5. æŒ‡å®šæ˜¾ç¤ºæµ®ç‚¹æ•°çš„ä½æ•°
```rust
println!("Pi is roughly {PI:.3}", PI = 3.141592); // Pi is roughly 3.142
```

ä»¥ä¸Šä½¿ç”¨çš„éƒ½æ˜¯ç®€å•çš„åŸºæœ¬ç±»å‹å˜é‡çš„æ ¼å¼åŒ–è¾“å‡ºï¼Œå³ `fmt::Display` [`trait`](https://rustwiki.org/zh-CN/rust-by-example/trait.html)ã€‚  
`std::fmt`åŒ…å«å¤šç§Â `trait`æ¥æ§åˆ¶æ–‡å­—æ˜¾ç¤ºï¼Œå…¶ä¸­é‡è¦çš„ä¸¤ç§ trait çš„åŸºæœ¬å½¢å¼å¦‚ä¸‹ï¼š
-  `fmt::Debug`ï¼šä½¿ç”¨Â `{:?}`Â æ ‡è®°ã€‚æ ¼å¼åŒ–æ–‡æœ¬ä»¥ä¾›è°ƒè¯•ä½¿ç”¨ã€‚
-  `fmt::Display`ï¼šä½¿ç”¨Â `{}`Â æ ‡è®°ã€‚ä»¥æ›´ä¼˜é›…å’Œå‹å¥½çš„é£æ ¼æ¥æ ¼å¼åŒ–æ–‡æœ¬ã€‚

## `fmt::Debug`
> æ‰€æœ‰çš„ç±»å‹ï¼Œè‹¥æƒ³ç”¨Â `std::fmt`Â çš„æ ¼å¼åŒ–æ‰“å°ï¼Œéƒ½è¦æ±‚å®ç°è‡³å°‘ä¸€ä¸ªå¯æ‰“å°çš„Â `traits`ã€‚ä»…æœ‰ä¸€äº›ç±»å‹æä¾›äº†è‡ªåŠ¨å®ç°ï¼Œæ¯”å¦‚Â `std`Â åº“ä¸­çš„ç±»å‹ã€‚æ‰€æœ‰å…¶ä»–ç±»å‹éƒ½**å¿…é¡»æ‰‹åŠ¨å®ç°**ã€‚  
> `fmt::Debug`Â è¿™ä¸ªÂ `trait`Â ä½¿è¿™é¡¹å·¥ä½œå˜å¾—ç›¸å½“ç®€å•ã€‚æ‰€æœ‰ç±»å‹éƒ½èƒ½æ¨å¯¼ï¼ˆ`derive`ï¼Œå³è‡ªåŠ¨åˆ›å»ºï¼‰`fmt::Debug`Â çš„å®ç°ã€‚  
> ä½†æ˜¯Â `fmt::Display`Â éœ€è¦æ‰‹åŠ¨å®ç°ã€‚

æ ¼å¼åŒ–è¾“å‡ºè‡ªå®šä¹‰ç±»å‹å˜é‡ï¼š
```rust
struct Number(i8);
println!("{}", Number(2)); // æŠ¥é”™
```
éœ€è¦åŠ ä¸Š `#[derive(Debug)]` å£°æ˜ï¼Œå¹¶ä½¿ç”¨`{:?}`å ä½ï¼š
```rust
#[derive(Debug)]
struct Number(i8);
println!("{:?}", Number(2)); // Number(2)
```

**æ‰€æœ‰Â `std`Â åº“ç±»å‹éƒ½å¤©ç”Ÿå¯ä»¥ä½¿ç”¨Â `{:?}`Â æ¥æ‰“å°ï¼Œä½†ä½¿ç”¨ `derive` çš„ä¸€ä¸ªé—®é¢˜æ˜¯ä¸èƒ½æ§åˆ¶è¾“å‡ºçš„å½¢å¼ã€‚**  
åŒæ—¶ Rust ä¹Ÿé€šè¿‡Â `{:#?}`Â æä¾›äº† â€œç¾åŒ–æ‰“å°â€ çš„åŠŸèƒ½ï¼Œæˆ–è€…å¯ä»¥é€šè¿‡æ‰‹åŠ¨å®ç°Â `fmt::Display`Â æ¥æ§åˆ¶æ˜¾ç¤ºæ•ˆæœã€‚

### `fmt::Display`
> `fmt::Display`Â é‡‡ç”¨Â `{}`Â æ ‡è®°

å…¶å®ç°æ–¹å¼éœ€è¦è‡ªå·±å®ç°ï¼Œæ¯”è¾ƒçµæ´»ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼š
```rust
use std::fmt;

struct Strawberry(i32);

impl fmt::Display for Strawberry {
    fn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result {
        return write!(f, "I have eat {} ğŸ“.", self.0);
    }
}

fn main() {
    println!("{}", Strawberry(12)); // I have eat 12 ğŸ“.
}
```

å®ç°å¤åˆç»“æ„ä½“çš„è‡ªå®šä¹‰æ˜¾ç¤ºï¼š
```rust
use std::fmt;

#[derive(Debug)]
struct Complex{
    real: f32,
    imag: f32
}

impl fmt::Display for Complex {
    fn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result {
        return write!(f, "{} + {}i", self.real, self.imag);
    }
}

fn main() {
    let c = Complex{
        real: 3.3,
        imag: 7.2
    };
    println!("Display: {}", c); // Display: 3.3 + 7.2i
    println!("Display: {:?}", c); // Debug: Complex { real: 3.3, imag: 7.2 }
}
```

é€šè¿‡ä»¥ä¸Šçš„ä¾‹å­ï¼Œå¯ä»¥ç®€å•ååº” `fmt::Display` çš„åŸºæœ¬ä½¿ç”¨æ–¹å¼ã€‚  
æ³¨æ„ï¼šå¯¹äºä¸€äº›**æ³›å‹å®¹å™¨**ï¼ˆgeneric containerï¼‰ï¼Œ`fmt::Display` éƒ½æ²¡æœ‰å®ç°ã€‚æ‰€ä»¥ï¼Œåœ¨è¿™äº›æ³›å‹çš„æƒ…å†µä¸‹è¦ç”¨ `fmt::Debug`ã€‚

å¯¹ä¸€ä¸ªç»“æ„ä½“å®ç° `fmt::Display`ï¼Œå…¶ä¸­çš„å…ƒç´ éœ€è¦ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°å¤„ç†åˆ°ï¼Œè¿™å¯èƒ½ä¼šå¾ˆéº»çƒ¦ã€‚é—®é¢˜åœ¨äºæ¯ä¸ª `write!` éƒ½è¦ç”Ÿæˆä¸€ä¸ª `fmt::Result`ã€‚æ­£ç¡®çš„å®ç°éœ€è¦å¤„ç†æ‰€æœ‰çš„ `Result`ã€‚`Rust` ä¸“é—¨ä¸ºè§£å†³è¿™ä¸ªé—®é¢˜æä¾›äº† `?` æ“ä½œç¬¦ï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š
```rust
use std::fmt;

struct List(Vec<i32>);

impl fmt::Display for List {
    fn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result {
        let vec = &self.0;

        write!(f, "[")?;

        for (index, value) in vec.iter().enumerate() {
            if index != 0 { 
                write!(f, ", ")?;
            }
            write!(f, "{}: {}", index, value)?;
        }

        return write!(f, "]");
    }
}

fn main() {
    let arr = List(vec![2, 7]);
    println!("{}", arr); // [0: 2, 1: 7]
}
```
ç»“åˆ Display çš„æ ¼å¼å­—ç¬¦ä¸²ï¼Œè¿˜å¯ä»¥åšåˆ°æ›´åŠ ä¸°å¯Œçš„è‡ªå®šä¹‰è¾“å‡ºï¼Œå¦‚ä¸‹é¢çš„RGBè½¬16è¿›åˆ¶ï¼š
```rust
use std::fmt::{Formatter, Display, Result};

struct Color {
    red: u8,
    green: u8,
    blue: u8,
}

impl Display for Color {
    fn fmt(&self, f: &mut Formatter) -> Result {
        return write!(
            f, 
            "RGB ({r}, {g}, {b}) 0x{r:0w$X}{g:0w$X}{b:0w$X}", // 0w$æ˜¯è¡¥ä½0ï¼ŒXæ˜¯è½¬16è¿›åˆ¶
            r = self.red,
            g = self.green,
            b = self.blue,
            w = 2
        );
    }
}

fn main() {
    for color in [
        Color { red: 128, green: 255, blue: 90 },
        Color { red: 0, green: 3, blue: 254 },
        Color { red: 0, green: 0, blue: 0 },
    ].iter() {
        println!("{}", *color)
    }
    /* 
    RGB (128, 255, 90) 0x80FF5A
    RGB (0, 3, 254) 0x0003FE
    RGB (0, 0, 0) 0x000000
    */
}
```

## ç±»å‹
### åŸç”Ÿç±»å‹
Rustçš„åŸç”Ÿç±»å‹åˆ†ä¸ºæ ‡é‡ç±»å‹ï¼ˆscalar typeï¼‰å’Œå¤åˆç±»å‹ï¼ˆcompound typeï¼‰ã€‚ç±»ä¼¼äºJsçš„åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹ã€‚

æ ‡é‡ç±»å‹åˆ†ä¸ºå‡ å¤§ç±»ï¼š
-   æœ‰ç¬¦å·æ•´æ•°ï¼ˆsigned integersï¼‰ï¼š`i8`ã€`i16`ã€`i32`ã€`i64`ã€`i128`Â å’ŒÂ `isize`ï¼ˆæŒ‡é’ˆå®½åº¦ï¼‰
-   æ— ç¬¦å·æ•´æ•°ï¼ˆunsigned integersï¼‰ï¼šÂ `u8`ã€`u16`ã€`u32`ã€`u64`ã€`u128`Â å’ŒÂ `usize`ï¼ˆæŒ‡é’ˆå®½åº¦ï¼‰
-   æµ®ç‚¹æ•°ï¼ˆfloating pointï¼‰ï¼šÂ `f32`ã€`f64`
-   `char`ï¼ˆå­—ç¬¦ï¼‰ï¼šå•ä¸ª Unicode å­—ç¬¦ï¼Œå¦‚Â `'a'`ï¼Œ`'Î±'`Â å’ŒÂ `'âˆ'`ï¼ˆæ¯ä¸ªéƒ½æ˜¯ 4 å­—èŠ‚ï¼‰
-   `bool`ï¼ˆå¸ƒå°”å‹ï¼‰ï¼šåªèƒ½æ˜¯Â `true`Â æˆ–Â `false`
-   å•å…ƒç±»å‹ï¼ˆunit typeï¼‰ï¼š`()`ã€‚å…¶å”¯ä¸€å¯èƒ½çš„å€¼å°±æ˜¯Â `()`Â è¿™ä¸ªç©ºå…ƒç»„

> å°½ç®¡å•å…ƒç±»å‹çš„å€¼æ˜¯ä¸ªå…ƒç»„ï¼Œä½†å®ƒå¹¶ä¸åŒ…å«å¤šä¸ªå€¼ï¼Œè¢«è®¤ä¸ºæ˜¯æ ‡é‡ç±»å‹ã€‚

å¤åˆç±»å‹ä¸»è¦æœ‰ä¸¤ç§ï¼š
-   æ•°ç»„ï¼ˆarrayï¼‰ï¼šå¦‚Â `[34, 56, 78]`
-   å…ƒç»„ï¼ˆtupleï¼‰ï¼šå¦‚Â `(false, 89)`

å˜é‡éƒ½èƒ½å¤Ÿæ˜¾å¼åœ°ç»™å‡º**ç±»å‹è¯´æ˜**ï¼Œå¦‚æœä¸æŒ‡å®šçš„è¯ï¼ŒRustä¼šç»™å®šå…¶é»˜è®¤ç±»å‹ï¼šæ•´å‹é»˜è®¤ä¸ºÂ `i32`Â ç±»å‹ï¼Œæµ®ç‚¹å‹é»˜è®¤ä¸ºÂ `f64`ç±»å‹ã€‚æ³¨æ„ **Rust è¿˜å¯ä»¥æ ¹æ®ä¸Šä¸‹æ–‡æ¥æ¨æ–­ï¼ˆinferï¼‰ç±»å‹**ã€‚

```rust
fn main() {
     // ç»™å‡ºç±»å‹è¯´æ˜
    let isOpen: bool = true;
    let let num_float: f64 = 1.0;
    
    // é»˜è®¤æ–¹å¼å†³å®šç±»å‹ã€‚
    let default_float   = 3.0; // `f64`
    let default_integer = 7;   // `i32`
    
    // ç±»å‹ä¹Ÿå¯æ ¹æ®ä¸Šä¸‹æ–‡è‡ªåŠ¨æ¨æ–­ã€‚
    let mut inferred_type = 12; // æ ¹æ®ä¸‹ä¸€è¡Œçš„èµ‹å€¼æ¨æ–­ä¸º i64 ç±»å‹
    inferred_type = 4294967296i64;
}
```

å¯å˜çš„ï¼ˆmutableï¼‰å˜é‡ï¼Œå…¶å€¼å¯ä»¥æ”¹å˜ï¼Œä½†å˜é‡çš„ç±»å‹å¹¶ä¸èƒ½æ”¹å˜ï¼  
ä½†å¯ä»¥ç”¨é®è”½ï¼ˆshadowï¼‰æ¥è¦†ç›–å‰é¢çš„å˜é‡ã€‚

```rust
fn main() {
    // 
    let mut mutable = 12; // Mutable `i32`
    mutable = 21;
    // æŠ¥é”™ï¼
    mutable = true;
    // ä½†å¯ä»¥ç”¨é®è”½ï¼ˆshadowï¼‰æ¥è¦†ç›–å‰é¢çš„å˜é‡ã€‚
    let mutable = true;
}
```

ç‰¹æ®Šåœ°ï¼Œæ•°å­—è¿˜å¯ä»¥é€šè¿‡**åç¼€**ï¼ˆsuffixï¼‰æˆ–**é»˜è®¤æ–¹å¼**æ¥å£°æ˜ç±»å‹ã€‚
```rust
let an_integer = 5i32; // åç¼€è¯´æ˜
```

### å­—é¢é‡
æ•´æ•°ã€æµ®ç‚¹æ•°ã€å­—ç¬¦ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼å’Œå•å…ƒç±»å‹å¯ä»¥ç”¨æ•°å­—ã€æ–‡å­—æˆ–ç¬¦å·ä¹‹ç±»çš„ â€œå­—é¢é‡â€ï¼ˆliteralï¼‰æ¥è¡¨ç¤ºï¼Œå¦‚æ•´æ•° `100` ã€æµ®ç‚¹æ•° `3.14`ã€å­—ç¬¦`'1'`ã€å­—ç¬¦ä¸²`"ab"`ã€å¸ƒå°”å€¼`true`å’Œå•å…ƒç±»å‹`()`ã€‚

å¦å¤–ï¼Œé€šè¿‡åŠ å‰ç¼€Â `0x`ã€`0o`ã€`0b`ï¼Œæ•°å­—å¯ä»¥ç”¨åå…­è¿›åˆ¶ã€å…«è¿›åˆ¶æˆ–äºŒè¿›åˆ¶è®°æ³•è¡¨ç¤ºã€‚   
ä¸ºäº†æ”¹å–„å¯è¯»æ€§ï¼Œå¯ä»¥åœ¨æ•°å€¼å­—é¢é‡ä¸­æ’å…¥ä¸‹åˆ’çº¿ï¼Œæ¯”å¦‚ï¼š`1_000`Â ç­‰åŒäºÂ `1000`ï¼Œ`0.000_001`Â ç­‰åŒäºÂ `0.000001`ã€‚

~æ„Ÿè§‰æ›´åƒ JS äº†ğŸ¤£~

åŒæ—¶ï¼ŒRustçš„å˜é‡è¿ç®—ç¬¦å’Œå…¶å®ƒè¯­è¨€ï¼ˆå°¤å…¶æ˜¯ JS ğŸ˜‚ï¼‰éƒ½å·®ä¸å¤šï¼Œè¿ç®—ç¬¦çš„çš„ä¼˜å…ˆçº§å’Œç±» C è¯­è¨€ç±»ä¼¼ã€‚

### å…ƒç»„
> å…ƒç»„æ˜¯ä¸€ä¸ªå¯ä»¥åŒ…å«å„ç§ç±»å‹å€¼çš„ç»„åˆã€‚

å…ƒç»„ä½¿ç”¨æ‹¬å·Â `()`Â æ¥æ„é€ ï¼Œè€Œæ¯ä¸ªå…ƒç»„è‡ªèº«åˆæ˜¯ä¸€ä¸ªç±»å‹æ ‡è®°ä¸ºÂ `(T1, T2, ...)`Â çš„å€¼ï¼Œå…¶ä¸­Â `T1`ã€`T2`Â æ˜¯æ¯ä¸ªå…ƒç´ çš„ç±»å‹ã€‚

å‡½æ•°å¯ä»¥ä½¿ç”¨å…ƒç»„æ¥è¿”å›å¤šä¸ªå€¼ï¼Œå› ä¸ºå…ƒç»„å¯ä»¥æ‹¥æœ‰ä»»æ„å¤šä¸ªå€¼ï¼ˆå…ƒç»„ä¹Ÿå¯ä»¥åµŒå¥—å…ƒç»„ï¼‰ã€‚

æ³¨æ„ï¼Œå…ƒç»„ä½¿ç”¨ `.[ä¸‹æ ‡ä½ç½®]` æ¥è®¿é—®æ¯ä¸ªå…·ä½“çš„å€¼ï¼š
```rust
let tuple_a = (2,3,4,'a');
println!("tuple_açš„ç¬¬äºŒä¸ªå€¼ä¸ºï¼š{}", tuple_a.1); // tuple_açš„ç¬¬äºŒä¸ªå€¼ä¸ºï¼š3
```
**æ³¨æ„ï¼š** åˆ›å»ºå•å…ƒç´ å…ƒç»„éœ€è¦ä¸€ä¸ªé¢å¤–çš„é€—å·ï¼Œç”¨äºå’Œæ‹¬å·åŒ…å«çš„å­—é¢é‡ä½œåŒºåˆ†: `(1i32, )`

### ç±»å‹è§£æ„
ç±»ä¼¼äº JS çš„ç±»å‹è§£æ„ï¼ŒRusté‡Œçš„å…ƒç»„ä¹Ÿå¯ä»¥è¢«è§£æ„ï¼ˆdeconstructï¼‰ï¼Œå°†å€¼è§£æ„ç»™å…¶å®ƒä¸åŒçš„å˜é‡ã€‚
```rust
let tuple = (2u32, "hello", true);
let (a, b, c) = tuple;
```
### æ•°ç»„
> æ•°ç»„ï¼ˆarrayï¼‰æ˜¯ä¸€ç»„æ‹¥æœ‰**ç›¸åŒç±»å‹**çš„å¯¹è±¡çš„é›†åˆï¼Œåœ¨å†…å­˜ä¸­æ˜¯è¿ç»­å­˜å‚¨çš„ã€‚æ•°ç»„ä½¿ç”¨ä¸­æ‹¬å·Â `[]`Â æ¥åˆ›å»ºï¼Œä¸”å®ƒä»¬çš„å¤§å°åœ¨ç¼–è¯‘æ—¶ä¼šè¢«ç¡®å®šã€‚æ•°ç»„çš„ç±»å‹æ ‡è®°ä¸ºÂ `[T; length]`

åˆ‡ç‰‡ï¼ˆsliceï¼‰å’Œæ•°ç»„ç±»ä¼¼ï¼Œä½†å…¶å¤§å°åœ¨ç¼–è¯‘æ—¶æ˜¯ä¸ç¡®å®šçš„ã€‚

> åˆ‡ç‰‡æ˜¯ä¸€ä¸ªåŒå­—å¯¹è±¡ï¼ˆtwo-word objectï¼‰ï¼Œç¬¬ä¸€ä¸ªå­—æ˜¯ä¸€ä¸ªæŒ‡å‘æ•°æ®çš„æŒ‡é’ˆï¼Œç¬¬äºŒä¸ªå­—æ˜¯åˆ‡ç‰‡çš„é•¿åº¦ã€‚è¿™ä¸ª â€œå­—â€ çš„å®½åº¦å’Œ usize ç›¸åŒï¼Œç”±å¤„ç†å™¨æ¶æ„å†³å®šï¼Œæ¯”å¦‚åœ¨ x86-64 å¹³å°ä¸Šå°±æ˜¯ 64 ä½ã€‚  
> slice å¯ä»¥ç”¨æ¥å€Ÿç”¨æ•°ç»„çš„ä¸€éƒ¨åˆ†ã€‚  
> slice çš„ç±»å‹æ ‡è®°ä¸º &[T]ã€‚  

æ•°ç»„å’Œåˆ‡ç‰‡ä½¿ç”¨æ–¹å¼ä¸¾ä¾‹ï¼š
```rust
fn main() {
    // æ•°ç»„
    let arr = [1, 2, 3, 4, 5];

    // len() è·å–æ•°ç»„é•¿åº¦
    println!("æ•°ç»„ç¬¬ä¸€ä¸ªå€¼ä¸ºï¼š{}ï¼Œæ•°ç»„çš„é•¿åº¦ä¸ºï¼š{}", arr[0], arr.len()); // æ•°ç»„ç¬¬ä¸€ä¸ªå€¼ä¸ºï¼š1ï¼Œæ•°ç»„çš„é•¿åº¦ä¸ºï¼š5

    // slice å¯ä»¥æŒ‡å‘æ•°ç»„
    println!("{:?}", &arr[1 .. 3]); // [2, 3]
}
```

### è‡ªå®šä¹‰ç±»å‹
Rust è‡ªå®šä¹‰æ•°æ®ç±»å‹ä¸»è¦æ˜¯é€šè¿‡ä¸‹é¢è¿™ä¸¤ä¸ªå…³é”®å­—æ¥åˆ›å»ºï¼š

1. `struct`ï¼š å®šä¹‰ä¸€ä¸ªç»“æ„ä½“ï¼ˆstructureï¼‰
2. `enum`ï¼š å®šä¹‰ä¸€ä¸ªæšä¸¾ç±»å‹ï¼ˆenumerationï¼‰

### struct ç»“æ„ä½“
> ç»“æ„ä½“ä¸­æœ‰ 3 ç§ç±»å‹ï¼Œä½¿ç”¨ `struct` å…³é”®å­—æ¥åˆ›å»ºï¼š
> 
> 1. å…ƒç»„ç»“æ„ä½“ï¼ˆtuple structï¼‰ï¼Œäº‹å®ä¸Šå°±æ˜¯å…·åå…ƒç»„è€Œå·²
> 2. C è¯­è¨€é£æ ¼ç»“æ„ä½“ï¼ˆC structï¼‰
> 3. å•å…ƒç»“æ„ä½“ï¼ˆunit structï¼‰ï¼Œä¸å¸¦å­—æ®µï¼Œåœ¨æ³›å‹ä¸­å¾ˆæœ‰ç”¨
> 
> ```rust
> // å•å…ƒç»“æ„ä½“
> struct Unit;
> 
> // å…ƒç»„ç»“æ„ä½“
> struct Pair(i32, f32);
> 
> // å¸¦æœ‰ä¸¤ä¸ªå­—æ®µçš„ç»“æ„ä½“
> struct Point {
>     x: f32,
>     y: f32,
> }
> ```

ç»“æ„ä½“å¯ä»¥å°†è‹¥å¹²ä¸ªç±»å‹ä¸ä¸€å®šç›¸åŒçš„æ•°æ®æ†ç»‘åœ¨ä¸€èµ·å½¢æˆæ•´ä½“ï¼Œæ¯ä¸ªæˆå‘˜å’Œå…¶æœ¬èº«éƒ½æœ‰ä¸€ä¸ªåå­—ï¼Œè¿™æ ·è®¿é—®å®ƒæˆå‘˜çš„æ—¶å€™å°±ä¸ç”¨è®°ä½ä¸‹æ ‡äº†ï¼Œå¯ä»¥ç”¨äºè§„èŒƒå¸¸ç”¨çš„æ•°æ®ç»“æ„ã€‚ä¾‹å¦‚ä¸‹é¢å®ç°çŸ©å½¢ï¼Œå¹¶è®¡ç®—å…¶é¢ç§¯ï¼š
```rust
struct Point {
    x: f32,
    y: f32,
}

#[allow(dead_code)]
struct Rectangle {
    // ç»™å®šå·¦ä¸Šè§’å’Œå³ä¸‹è§’åœ¨ç©ºé—´ä¸­çš„ä½ç½®æ¥æŒ‡å®šçŸ©å½¢
    top_left: Point,
    bottom_right: Point,
}

fn rect_area(rect: Rectangle) -> f32 {
    let Rectangle {
        top_left: tl,
        bottom_right: br
    } = rect;
    let Point { x: x1, y: y1} = tl;
    let Point { x: x2, y: y2} = br;
    let width = x2 - x1;
    let height = y2 - y1;
    let area = width * height;

    if area > 0f32 { // Rust æ²¡æœ‰æä¾›ä¸‰å…ƒè¡¨è¾¾å¼
        area // return å¯ä»¥ä¸ç”¨å†™
    } else {
        -area
    }
}

fn main() {
    let point: Point = Point { x: 2.0, y: 1.0 };
    // let bottom_right = Point { x: 5.2, ..point }; // { x: 5.2, y: 0.4 }

    let _rectangle = Rectangle {
        // ç»“æ„ä½“çš„å®ä¾‹åŒ–ä¹Ÿæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼
        top_left: Point { x: 5.0, y: 6.0 },
        bottom_right: point,
    };
    let res = rect_area(_rectangle);
    println!("çŸ©å½¢çš„é¢ç§¯ä¸ºï¼š{}", res); // çŸ©å½¢çš„é¢ç§¯ä¸ºï¼šçŸ©å½¢çš„é¢ç§¯ä¸ºï¼š15
}
```
### enum æšä¸¾
> `enum` å…³é”®å­—å…è®¸åˆ›å»ºä¸€ä¸ªä»æ•°ä¸ªä¸åŒå–å€¼ä¸­é€‰å…¶ä¸€çš„æšä¸¾ç±»å‹ï¼ˆenumerationï¼‰ã€‚ä»»ä½•ä¸€ä¸ªåœ¨ `struct` ä¸­åˆæ³•çš„å–å€¼åœ¨ `enum` ä¸­ä¹Ÿåˆæ³•ã€‚

```rust
enum WebEvent {
    PageLoad,
    KeyPress(char),
    Click { x: i64, y: i64 }
}

fn inspect(event: WebEvent) {
    match event {
        WebEvent::PageLoad => println!("page loaded"),
        WebEvent::KeyPress(c) => println!("pressed '{}'.", c),
        WebEvent::Click { x, y } => {
            println!("clicked at x={}, y={}.", x, y);
        },
    }
}

fn main() {
    let pressed = WebEvent::KeyPress('x');
    let click   = WebEvent::Click { x: 20, y: 80 };
    let load    = WebEvent::PageLoad;

    inspect(pressed); // pressed 'x'.
    inspect(click); // clicked at x=20, y=80.
    inspect(load); // page loaded
}
```

è¿˜å¯ä»¥åˆ›å»ºç±»å‹åˆ«åï¼š

```rust
type event = WebEvent;
```

æœ€å¸¸è§çš„æƒ…å†µå°±æ˜¯åœ¨ `impl` å—ä¸­ä½¿ç”¨ `self` åˆ«åã€‚

```rust
use std::fmt;

struct Complex {
    real: f32,
    imag: f32
}

impl fmt::Display for Complex {
    fn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result {
        return write!(f, "{} + {}i", self.real, self.imag);
    }
}
```
Rustå¯ä»¥éšå¼è¾¨åˆ«å€¼ï¼š
```rust
// éšå¼è¾¨åˆ«å€¼ï¼ˆä» 0 å¼€å§‹ï¼‰çš„ enum
enum Number {
    Zero, // 0
    One, // 1
    Two, // 2
}
// æ˜¾å¼è¾¨åˆ«å€¼
enum Color {
    Red = 0xff0000,
    Green = 0x00ff00,
    Blue = 0x0000ff,
}
```

enum çš„ä¸€ä¸ªå¸¸è§ç”¨æ³•å°±æ˜¯åˆ›å»ºé“¾è¡¨ï¼ˆlinked-listï¼‰ï¼š[æµ‹è¯•å®ä¾‹ï¼šé“¾è¡¨](https://rustwiki.org/zh-CN/rust-by-example/custom_types/enum/testcase_linked_list.html)

### å¸¸é‡
Rust æœ‰ä¸¤ç§å¸¸é‡ï¼Œå¯ä»¥åœ¨ä»»æ„ä½œç”¨åŸŸå£°æ˜ï¼ŒåŒ…æ‹¬å…¨å±€ä½œç”¨åŸŸã€‚å®ƒä»¬éƒ½éœ€è¦æ˜¾å¼çš„ç±»å‹å£°æ˜ï¼š

- `const`ï¼šä¸å¯æ”¹å˜çš„å€¼ï¼ˆé€šå¸¸ä½¿ç”¨è¿™ç§ï¼‰ã€‚
- `static`ï¼šå…·æœ‰ `'static` ç”Ÿå‘½å‘¨æœŸçš„ï¼Œå¯ä»¥æ˜¯å¯å˜çš„å˜é‡ï¼ˆ`static mut`ï¼‰ã€‚


## ä¸€äº›æŠ€å·§
1. `#[allow(dead_code)]` ç”¨äºéšè—å¯¹æœªä½¿ç”¨ä»£ç çš„è­¦å‘Šã€‚
    - `#[allow(dead_code)]`
    - `#![allow(dead_code)]` ç”¨äºæœ¬æ–‡ä»¶èŒƒå›´
2. ä½¿ç”¨ `use` å£°æ˜å¯ä»¥å¯¼å…¥ç‰¹å®šçš„æ¨¡å—ï¼Œå°±ä¸éœ€è¦å†å†™å®Œæ•´çš„è·¯å¾„äº†ï¼Œç±»ä¼¼äº lua ä¸­çš„ `local`ã€‚


## å‚è€ƒ
- [std::fmt - Rust (rustwiki.org)](https://rustwiki.org/zh-CN/std/fmt/)


